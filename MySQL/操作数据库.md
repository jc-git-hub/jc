# 数据库MySQL

* 健康码 
* 公安系统
* 支付宝  微信支付
* 酒店 
* 12306
* 网易云  收藏歌曲
* 手机通话记录



## mysql5.7当前主流数据库

* mysql
* sqlserver
* oracle
* sqlite3

> 数据库语法都差不多
>
> mysql、sqlite 开源免费

## 五个基本单位

* 数据库服务器  mysql server
* 数据库
* 数据表
* 数据字段
* 数据行

## 数据库操作

### 连接数据库

```python
mysql -u root -p
-->pwd

mysql -u root -h ip地址 -p
输入密码

-u 用户名
-p 密码
```

> mysql 以;为结束

### 查看数据库

 ```
show databases;
 ```

### 创建数据库

```
create database 
```

### 删除数据库

```
drop database 数据库名
```

### 选中数据库

```
use 数据库名
```

### 退出数据库

exit

## 数据表操作

```mysql
use myfirst_database;
-- desc person


# 查看建表语句
-- show CREATE table person;
-- >
-- CREATE TABLE `person` (
--   `id` int(11) DEFAULT NULL,
--   `username` varchar(64) DEFAULT NULL,
--   `pwd` varchar(128) DEFAULT NULL
-- ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4

# 创建数据表

-- CREATE TABLE `test0` (
--   `id` int(11) NOT NULL AUTO_INCREMENT,
--   `username` varchar(200) DEFAULT NULL,
--   `pwd` bigint(10) DEFAULT NULL,
--   PRIMARY KEY (`id`)
-- ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4
# 修改表名
-- rename

# 数据字段操作
# ALTER
# 修改字段类型
-- ALTER table test0 MODIFY pwd VARCHAR(30) first;

# 增加表字段
# ADD
-- alter table test0 add COLUMN age TINYINT(3) DEFAULT 18;

# 修改表字段名
# CHANGE
-- alter table test0 change age ages TINYINT(3) DEFAULT 18;
-- alter table test0 change pwd pwds VARCHAR(20) ;

# change、add 、 modify 都支持后边 加  first 、after 
```



```
use 数据库名;
show tables;
```

## 查看表结构

```
desc 表名；
```

### 查看创建表的语句

```mysql
show CREATE TABLE uses;

CREATE TABLE `uses` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) NOT NULL,
  `password` varchar(255) NOT NULL,
  `age` tinyint(4) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4
```

### 创建数据表

```mysql
use 数据库名
CREATE TABLE if NOT EXISTS 表名(id int(11),username VARCHAR(64),password varchar(128))engine = INNODB default CHARSET=utf8mb4;
```

### 数据字段操作

> alter table 表名

### 修改表字段类型

> alter table 表名 modify 字段名 类型(长度)；

```mysql

-- 修改表字段类型 ALTER TABLE uses MODIFY pwd BIGINT(10)
```

### 增加表字段

```mysql
增加表字段alter table uses add column money FLOAT(10)
```

```mysql

-- 不写modify也可以 alter table uses add tel varchar(11)
```



### change、add 、 modify 都支持后边 加  first 、after 

```
mysql> alter table users modify tel char(11) first;
```



## 数据类型 引擎 字符串  索引

### 数据类型

1. 数值类型
2. 字符串类型
3. 日期类型
4. 复合类型
5. 空间类型

### 数值类型

| 类型      | 所占字节 | 范围                   |
| --------- | -------- | :--------------------- |
| tinyint   | 1        | -128                   |
| smallint  | 2个字节  | -32768-32767           |
| mediumint | 3个字节  | -8388608-8388607       |
| int       | 4        | -2147483678-2147483678 |
| bigint    | 8        |                        |

ps: 性别  男|女  0表示女 1表示男  tinyint就够了

年龄  要使用无符号的整型   年龄没有负数

在实际开发过程中 为了避免浪费  选择合适的类型

#### 浮点类型

| 类型         | 字节 | 范围                                   |
| ------------ | ---- | -------------------------------------- |
| float(m,d)   | 4    | 单精度 m是总个数  d小数位  float(10,2) |
| double(m,d)  | 8    | 双精度 m总个数 d小数位 double(10,2)    |
| decimal(m,d) |      | 存储的是字符串的浮点数                 |

ps : 浮点型是非精确值  会存在不太准确的情况

​	decimal定点数   mysql内部  本质是字符串存储 对精度比较高的存储 用decimal

### 字符串

| 类型         | 字节                          | 范围                        |
| ------------ | ----------------------------- | --------------------------- |
| char         | 0-255字节                     | 定长                        |
| varchar      | 0-255字节                     | 变长                        |
| tinyblob     | 0-255字节                     | 不超过255字节的二进制字符串 |
| tinytext     | 0-255字节                     | 短文本字符串                |
| blob         | 0-65535字节                   | 二进制形式的长文本          |
| text         | 0-65535字节                   | 长文本                      |
| mediumblob   | 0-16777215字节                | 二进制形式的中等长度文本    |
| mediumtext   | 0-16777215字节                | 中等长度文本                |
| longblob     |                               | 二进制形式的极大长度文本    |
| longtext     |                               | 极大长度文本                |
| varbinary(M) | 允许长度0-M个字节的定长字符串 | 指的长度+1个字节            |
| binary(M)    | 允许长度0-M个字节的定长字符串 |                             |

二进制blob区分大小写 

ps: char(100) 如果 字符串长度只有10 剩下的90用空格补齐   

​	   varchar(100) 如果字符串长度只有10 剩下的90不用空格补齐   别的字符串可以占用

​		text blob  : text 普通字符串不区分大小写  

​							blob 二进制字符串  区分大小写 

​							大小写修饰符 不适用于 TEXT blob类型

### 时间类型

| 类型      | 字节    | 范围                   |
| --------- | ------- | ---------------------- |
| date      | 3个字节 | 2021-01-04             |
| time      | 3个字节 | 16：08：58             |
| datetime  | 8个字节 | 2021-01-04 16:08:58    |
| timestamp | 4个字节 | 自动存储记录修改的时间 |
| year      |         |                        |
|           |         |                        |

ps:

1. 网站、app 很多人喜欢用int 来储存时间  int存的是时间戳  方便计算  哪怕前后端语言不一样  只需要将时间转化就行。

2. 也有人喜欢用datetime站在数据库的角度上查看  方便查看
3. 根据实际情况选择



### 总结

1. 论占据空间大小  从小到大  字符串  日期  数值
2. 根据实际情况选择合适的类型  避免浪费  也要考虑 到后期的扩展情况

#### 复合类型

| 类型 | 说明 | 举例                |
| ---- | ---- | ------------------- |
| set  | 集合 | set('num1','num2')  |
| enum | 枚举 | enum('num1','num2') |

ps: 区别  enum只允许从一个集合中取一个

​				set 允许从集合中取任意个



### 字段其他属性设置

unsigned 主要适用  整型和浮点型  使用无符号  也就是说没有负号-

​				可以说  存储的位数更长  以tinyint为例子  -127——127  使用无符号  可以存储0-255长度

​				create table users(id int (11) unsigned);

zerofill   0不是空格   使用它可以阻止里面填充负数  在int或者浮点 后边加上 zerofill 



default  设置默认值   

​				mysql> alter table test1 add column age tinyint default 18;

not null  不能为空   精确的说法是 无       其中 0  空格 空字符串''  不代表无

### 字符集

* 常用字符集
* 数据库的字符集

### 常用字符集

1. ascii 使用指定的7位8位  二进制数（只包含0，1）组合来表示128或者256种可能的字符

2. GBK GB2312的升级版   中国定义的汉字编码规范  向下兼容
3. Uncode (统一码  万国码)   国际组织定义的 可以容纳世界上所有文字符号 的字符编码方案
   1. 满足跨语言  跨平台
4. utf-8 万国码  针对Unicode的可变长度字符编码  空间比ASCII 大一倍

#### 中文常用的字符串

* gbk
* utf-8

##### 开发中

| 字符集           | 说明                        |
| ---------------- | --------------------------- |
| utf-8_general_ci | Unicode 多语言 不区分大小写 |
| gbk              | 简体中文 不区分大小写       |

> ci 存储  排序的时候  不区分大小写
>
> mysql 没有 utf-8 只要utf8